<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Past Live Archive | shinoefuhi</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;600&family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root { --bg-color: #f8fafd; --accent-yellow: #fdfd96; --main-text: #2c3e50; --sub-text: #7f8c8d; }
        body { margin: 0; background-color: var(--bg-color); color: var(--main-text); font-family: 'Noto Serif JP', serif; padding-bottom: 50px; }
        h1 { text-align: center; font-family: 'Montserrat', sans-serif; margin-top: 50px; }
        .container { max-width: 800px; margin: 50px auto; padding: 0 20px; }
        
        .live-item { background: white; padding: 25px; margin-bottom: 20px; border-radius: 4px; border-left: 4px solid #ccc; display: flex; flex-wrap: wrap; gap: 20px; align-items: center; opacity: 0.8; }
        .live-date { font-family: 'Montserrat', sans-serif; font-weight: bold; width: 120px; }
        .live-info { flex: 1; }
        .live-title { font-weight: bold; display: block; }
        .btn { padding: 5px 15px; border: 1px solid #ccc; border-radius: 20px; font-size: 0.8rem; cursor: pointer; background: transparent; }
        .btn:hover { background: #eee; }
        .back-link { display: block; text-align: center; margin-top: 30px; text-decoration: none; border-bottom: 1px solid; display: inline-block; }

        /* モーダル */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); justify-content: center; align-items: center; }
        .modal-content { max-width: 90%; max-height: 90%; }
        .close { position: absolute; top: 20px; right: 35px; color: white; font-size: 40px; cursor: pointer; }
    </style>
</head>
<body>

<h1>PAST LIVE ARCHIVE</h1>

<div class="container">
    <div id="archive-list">Loading...</div>
    <div style="text-align: center; margin-top: 50px;">
        <a href="index.html" class="back-link">Return to Top</a>
    </div>
</div>

<div id="flyerModal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <img class="modal-content" id="modalImg">
</div>

<script>
    fetch('lives.json')
        .then(response => response.json())
        .then(data => {
            const listContainer = document.getElementById('archive-list');
            listContainer.innerHTML = '';
            
            // 新しい順（降順）にソート
            data.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            const today = new Date();
            today.setHours(0,0,0,0);

            data.forEach(live => {
                const liveDate = new Date(live.date);
                // 過去のライブのみ表示
                if (liveDate < today) {
                    const liveHtml = `
                        <div class="live-item">
                            <div class="live-date">${live.date.replace(/-/g, '.')}</div>
                            <div class="live-info">
                                <span class="live-title">${live.title}</span>
                                <span style="font-size:0.9rem;">@ ${live.place}</span>
                            </div>
                            <div>
                                ${live.flyer ? `<button class="btn" onclick="openModal('${live.flyer}')">FLYER</button>` : ''}
                            </div>
                        </div>
                    `;
                    listContainer.innerHTML += liveHtml;
                }
            });
        });

    function openModal(imgSrc) {
        document.getElementById('modalImg').src = imgSrc;
        document.getElementById('flyerModal').style.display = "flex";
    }
    function closeModal() {
        document.getElementById('flyerModal').style.display = "none";
    }
    window.onclick = function(event) {
        if (event.target == document.getElementById('flyerModal')) { closeModal(); }
    }
</script>

</body>
</html>
